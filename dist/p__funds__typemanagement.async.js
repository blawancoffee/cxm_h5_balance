(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"8Ztw":function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=n(a("kLXV"));a("IzEo");var r=n(a("bx4M"));a("P2fV");var d=n(a("NJEC"));a("Awhp");var u=n(a("KrTs"));a("14J3");var f=n(a("BMrR"));a("jCWc");var c=n(a("kPKH"));a("+L6B");var s=n(a("2/Rp"));a("miYZ");var o=n(a("tsqr")),m=n(a("lwsE")),p=n(a("W8MJ")),h=n(a("a1gu")),v=n(a("Nsbk")),y=n(a("7W2i"));a("5NDa");var E=n(a("5rEg"));a("OaEy");var g=n(a("2fM7"));a("g9YV");var b=n(a("wCAj"));a("y8nQ");var x,k,w,C=n(a("Vl3Y")),q=l(a("q1tI")),A=a("MuoO"),D=n(a("xLbA")),I=a("34ay"),S=C.default.Item,N=b.default.Column,T=g.default.Option,V=E.default.TextArea,L=(0,I.getAuthorityUserInfo)(),M=(x=(0,A.connect)(function(e){var t=e.finance,a=e.loading;return{finance:t,loading:a.models.list}}),k=C.default.create(),x(w=k(w=function(e){function t(e){var a;return(0,m.default)(this,t),a=(0,h.default)(this,(0,v.default)(t).call(this,e)),a.handleCancel=function(){a.setState({show:!1})},a.add=function(){a.setState({show:!0,type:"",id:"",title:"\u65b0\u589e\u8d26\u76ee"})},a.handleSubmit=function(e){a.state.trainData;e.preventDefault(),a.props.form.validateFields(["remark","seq","value","name"],function(e,t){if(!e){var n=t.remark,l=t.seq,i=t.value,r=t.name;a.setState({show:!1});var d={id:a.state.id,name:r,remark:n,seq:l,value:i,dictTypeCode:"accountsAct"};"modify"==a.state.type?a.fetchUpdate(d).then(function(e){var t=a.props.finance.updateData,n=t.code;200==n?o.default.info("\u4fee\u6539\u6210\u529f!"):9001===n?o.default.info("\u8be5\u5b57\u5178\u7c7b\u578b\u5df2\u7ecf\u5b58\u5728\uff01!"):o.default.info("\u4fee\u6539\u5931\u8d25!"),a.fetchList({dictType:"accountsAct"})}):a.fetchAdd(d)}})},a.state={show:!1,type:"",id:"",trainData:[{name:"\u6536\u5165",value:"in"},{name:"\u652f\u51fa",value:"out"}],loading:!0,title:"\u65b0\u589e\u8d26\u76ee"},a}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.fetchList({dictType:"accountsAct"})}},{key:"fetchList",value:function(e){var t=this;this.props.dispatch({type:"finance/fetchList",payload:e}).then(function(e){t.setState({loading:!1})})}},{key:"fetchAdd",value:function(e){var t=this;this.props.dispatch({type:"finance/fetchAdd",payload:e}).then(function(e){var a=t.props.finance.addData,n=a.code;200==n?(o.default.info("\u65b0\u589e\u8d26\u76ee\u4fe1\u606f\u6210\u529f!"),t.fetchList({dictType:"accountsAct"})):9001===n?o.default.info("\u8be5\u5b57\u5178\u7c7b\u578b\u5df2\u7ecf\u5b58\u5728\uff01!"):o.default.info("\u65b0\u589e\u8d26\u76ee\u4fe1\u606f\u5931\u8d25!")})}},{key:"fetchEnable",value:function(e){return this.props.dispatch({type:"finance/fetchEnable",payload:e})}},{key:"fetchView",value:function(e){return this.props.dispatch({type:"finance/fetchView",payload:e})}},{key:"fetchUpdate",value:function(e){return this.props.dispatch({type:"finance/fetchUpdate",payload:e})}},{key:"statusSetting",value:function(e,t){var a=this;t=t?1:0,this.fetchEnable({id:e,enable:t}).then(function(e){var t=a.props.finance.enableData,n=t.code;200==n?o.default.info("\u4fee\u6539\u6210\u529f!"):o.default.info("\u4fee\u6539\u5931\u8d25!"),a.fetchList({dictType:"accountsAct"})})}},{key:"modify",value:function(e){var t=this;this.fetchView({id:e}).then(function(a){t.setState({show:!0,type:"modify",id:e,title:"\u4fee\u6539\u8d26\u76ee"})})}},{key:"getExtraContent",value:function(){return q.default.createElement("div",{className:D.default.extraContent},q.default.createElement(C.default,{onSubmit:this.handleOnQuery,className:"login-form"},q.default.createElement(f.default,{gutter:24},q.default.createElement(c.default,{span:24,className:D.default.submitBtn},q.default.createElement(s.default,{onClick:this.add},"\u65b0\u589e\u8d26\u76ee")))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.finance.listData,n=(t.loading,this.props.finance.viewData),l=this.props.form.getFieldDecorator,f=this.getExtraContent();n="modify"==this.state.type?n:{};var c=n,o=c.name,m=c.value,p=c.remark,h=c.seq,v={pageSize:10},y=[];return void 0!==a&&null!==a&&(y=a),q.default.createElement("div",{className:D.default.billDetails},q.default.createElement(r.default,{className:D.default.listCard,bordered:!1,title:"",extra:f},q.default.createElement(b.default,{dataSource:y,pagination:v,scroll:{x:800},bordered:!0,loading:this.state.loading},q.default.createElement(N,{title:"\u6536\u652f\u7c7b\u578b",dataIndex:"name",sorter:function(e,t){var a=e.name,n=t.name;return a="string"!==typeof a?a+"":a,n="string"!==typeof n?n+"":n,a.localeCompare(n,"zh")},render:function(t,a){var n=a.id,l=a.name,i=a.stallId;return q.default.createElement("a",{href:"javascript:;",onClick:e.modify.bind(e,n),disabled:!(i>0||null!=L&&L.isManager)},l)}}),q.default.createElement(N,{title:"\u8d26\u76ee\u7c7b\u578b",dataIndex:"value",render:function(e,t){var a=t.value;return q.default.createElement("span",null,a)}}),q.default.createElement(N,{title:"\u64cd\u4f5c\u4eba",dataIndex:"createName"}),q.default.createElement(N,{title:"\u72b6\u6001",dataIndex:"enable",render:function(e,t){var a=t.enable,n=a?"success":"error";return q.default.createElement("span",null,q.default.createElement(u.default,{status:n}),a?"\u542f\u7528":"\u7981\u7528")}}),q.default.createElement(N,{title:"\u5907\u6ce8",dataIndex:"remark"}),q.default.createElement(N,{title:"\u6392\u5e8f",dataIndex:"seq",sorter:function(e,t){return e.seq-t.seq}}),q.default.createElement(N,{title:"\u64cd\u4f5c",dataIndex:"salerNameList",render:function(t,a){var n=a.enable,l=a.id,i=a.stallId;return q.default.createElement(d.default,{title:"\u662f\u5426".concat(n?"\u7981\u7528":"\u542f\u7528","\u8d26\u76ee"),onConfirm:e.statusSetting.bind(e,l,n),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},q.default.createElement("a",{href:"javascript:;",disabled:!(i>0||null!=L&&L.isManager)},n?"\u7981\u7528":"\u542f\u7528"))}}))),q.default.createElement(r.default,{className:D.default.modalCard},q.default.createElement(i.default,{title:this.state.title,visible:this.state.show,onCancel:this.handleCancel,destroyOnClose:"true",width:"600px",className:D.default.modal,footer:[]},q.default.createElement(C.default,{onSubmit:this.handleSubmit},q.default.createElement(S,null,l("name",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6536\u652f\u7c7b\u578b!"}]})(q.default.createElement(g.default,{placeholder:"\u8bf7\u9009\u62e9\u6536\u652f\u7c7b\u578b"},this.state.trainData.map(function(e){return q.default.createElement(T,{key:e.name},e.name)})))),q.default.createElement(S,null,l("value",{initialValue:m,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u76ee\u7c7b\u578b"}]})(q.default.createElement(E.default,{prefix:"\u7c7b\u578b",type:"text",placeholder:"\u8bf7\u8f93\u5165\u8d26\u76ee\u7c7b\u578b"}))),q.default.createElement(S,null,l("seq",{initialValue:h,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5e8f\u53f7!"}]})(q.default.createElement(E.default,{prefix:"\u6392\u5e8f",type:"text",placeholder:"\u8bf7\u8f93\u5165\u5e8f\u53f7"}))),q.default.createElement(S,null,l("remark",{initialValue:p})(q.default.createElement(V,{autosize:{minRows:1,maxRows:3},placeholder:"\u5907\u6ce8"}))),q.default.createElement("div",{style:{display:"flex",height:"36px"}},q.default.createElement(s.default,{style:{float:"right",marginRight:"5px",marginTop:"5px"},type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))))}}]),t}(q.PureComponent))||w)||w);t.default=M}}]);